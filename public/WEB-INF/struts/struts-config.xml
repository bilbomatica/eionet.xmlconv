<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN" "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>
    <form-beans>
	    <form-bean name="loginForm"  type="org.apache.struts.validator.DynaValidatorForm">
            <form-property name="username" type="java.lang.String"/>
            <form-property name="password" type="java.lang.String"/>
        </form-bean>
        <form-bean name="stylesheetForm" type="eionet.gdem.web.struts.stylesheet.StylesheetForm" />
        <form-bean name="schemaForm" type="eionet.gdem.web.struts.schema.SchemaElemForm" />     
        
        <form-bean name="ConversionForm" type="org.apache.struts.validator.DynaValidatorForm">
	        <form-property name="url" type="java.lang.String"/>
	        <form-property name="schemaUrl" type="java.lang.String"/>
	        <form-property name="conversionId" type="java.lang.String"/>
	        <form-property name="validate" type="java.lang.String"/>
        </form-bean>   
	
        <form-bean name="UplSchemaForm" type="eionet.gdem.web.struts.schema.UplSchemaForm" />                   
   		<form-bean name="dynamicItemForm" type="org.apache.struts.validator.DynaValidatorForm">
            <form-property name="temp" type="java.util.HashMap"/>
        </form-bean>
        <form-bean name="imageForm" type="eionet.gdem.web.struts.uimanage.ImageManagerForm"/>
        <form-bean name="ldapForm" type="org.apache.struts.validator.DynaValidatorForm">
	        <form-property name="url" type="java.lang.String"/>
	        <form-property name="context" type="java.lang.String"/>
	        <form-property name="userDir" type="java.lang.String"/>
	        <form-property name="attrUid" type="java.lang.String"/>
        </form-bean>   
        <form-bean name="dbForm" type="org.apache.struts.validator.DynaValidatorForm">
	        <form-property name="dbUrl" type="java.lang.String"/>
        	<form-property name="user" type="java.lang.String"/>
        	<form-property name="password" type="java.lang.String"/>
        </form-bean>   
        <form-bean name="EditUplSchemaForm" type="eionet.gdem.web.struts.schema.EditUplSchemaForm"/>   
        <form-bean name="getXslForm" type="org.apache.struts.validator.DynaValidatorForm">
	        <form-property name="id" type="java.lang.String"/>
        	<form-property name="conv" type="java.lang.String"/>
        </form-bean>
        <form-bean name="schemaStyleForm" type="org.apache.struts.action.DynaActionForm">
	        <form-property name="schema" type="java.lang.String"/>
	    </form-bean>
	    <form-bean name="HostForm" type="org.apache.struts.validator.DynaValidatorForm">
	    	<form-property name="id" type="java.lang.String"/>
	        <form-property name="host" type="java.lang.String"/>
        	<form-property name="username" type="java.lang.String"/>
        	<form-property name="password" type="java.lang.String"/>
        </form-bean>
        <form-bean name="UplXmlFileForm" type="eionet.gdem.web.struts.xmlfile.UplXmlFileForm" />                   
        <form-bean name="EditUplXmlFileForm" type="eionet.gdem.web.struts.xmlfile.EditUplXmlFileForm"/>   
	       
             
    </form-beans>

    <global-forwards>
        <forward name="home" path="/do/stylesheetList" redirect="true" />
        <forward name="loginForm" path="/login.jsp" redirect="true" />
        <forward name="error" path="/error.jsp" redirect="true" />
    </global-forwards>
    
    <action-mappings>
        <action path="/start" type="eionet.gdem.web.struts.StartAction">
            <forward name="login" path="/do/login" redirect="true"/>            
        </action>
        <action path="/login" input="/login.jsp" name="loginForm" scope="request" type="eionet.gdem.web.struts.login.LoginAction" validate="true">           
        </action>        
        <action path="/stylesheetList" type="eionet.gdem.web.struts.stylesheet.StylesheetListAction">
            <forward name="success" path="/stylesheetList.jsp" redirect="true"/>            
        </action>
        <action path="/generatedStylesheetList" type="eionet.gdem.web.struts.stylesheet.GeneratedStylesheetListAction">
            <forward name="success" path="/generatedStylesheetList.jsp" redirect="true"/>            
        </action>
        <action path="/deleteSchema"  scope="request" type="eionet.gdem.web.struts.stylesheet.SchemaDeleteAction">           
        	<forward name="success" path="/do/stylesheetList"  redirect="true"/>            
        </action>        
        <action path="/schemaStylesheets" type="eionet.gdem.web.struts.stylesheet.SchemaStylesheetAction" name="schemaStyleForm">   
	        <forward name="success" path="/schemaStylesheets.jsp" redirect="true"/>                      
        </action>
        <action path="/deleteStylesheet"  scope="request" type="eionet.gdem.web.struts.stylesheet.StylesheetDeleteAction">           
        	<forward name="success" path="/do/schemaStylesheets" redirect="true"/>            
        </action>        
        <action path="/addStylesheetForm" type="eionet.gdem.web.struts.stylesheet.ConvTypeAction">   
	        <forward name="success" path="/addStylesheet.jsp" />                      
        </action>
        <action path="/stylesheetAdd" input="/addStylesheet.jsp" name="stylesheetForm"
            type="eionet.gdem.web.struts.stylesheet.AddStylesheetAction">
            <forward name="success" path="/do/schemaStylesheets"/>
            <forward name="fail" path="/do/addStylesheetForm" redirect="true"/>						   
        </action>
        <action path="/stylesheetEditForm" name="stylesheetForm" type="eionet.gdem.web.struts.stylesheet.EditStylesheetFormAction" input="/editStylesheet.jsp" scope="request">
            <forward name="success" path="/editStylesheet.jsp" redirect="true" />
        </action>
        <action path="/stylesheetEdit" input="/editStylesheet.jsp" name="stylesheetForm"
            type="eionet.gdem.web.struts.stylesheet.EditStylesheetAction" scope="request" parameter="action">
             <forward name="success" path="/do/schemaStylesheets" redirect="true"/>
             <forward name="fail" path="/editStylesheet.jsp" redirect="false"/>
        </action>
        <action path="/schemaElemForm" name="schemaForm" type="eionet.gdem.web.struts.schema.SchemaElemFormAction" input="/schema.jsp" scope="request">
            <forward name="success" path="/schema.jsp" redirect="true"/>
        </action>
        <action path="/deleteElem"  scope="request" type="eionet.gdem.web.struts.schema.DeleteRootElemAction" input="/schema.jsp">           
        	<forward name="success" path="/do/schemaElemForm"  />            
        </action>        
        <action path="/elementAdd" name="schemaForm" scope="request" type="eionet.gdem.web.struts.schema.AddElemAction" input="/schema.jsp">           
        	<forward name="success" path="/do/schemaElemForm" />            
        </action>        
        <action path="/schemaUpdate" name="schemaForm" scope="request" type="eionet.gdem.web.struts.schema.EditSchemaAction" input="/schema.jsp"> 
        	<forward name="back" path="/do/stylesheetEdit" redirect="true"/>
        	<forward name="success" path="/do/schemaElemForm"/>
        </action>    
        <action path="/getStylesheet"  scope="request" type="eionet.gdem.web.struts.stylesheet.GetStylesheetAction" name="getXslForm">           
	        <forward name="fail" path="/error/StylesheetError.jsp" />
        </action>    
        
        <!-- Converter -->
        <action path="/listConvForm"  type="eionet.gdem.web.struts.conversion.ListConvFormAction" input="/listConv.jsp" scope="request">
            <forward name="success" path="/listConv.jsp" redirect="true"/>
        </action>
        <action path="/testConversionForm" name="ConversionForm" type="eionet.gdem.web.struts.conversion.TestConvFormAction" input="/testConv.jsp" scope="request">
            <forward name="success" path="/testConv.jsp" redirect="true"/>
            <forward name="error" path="/do/testConversionForm" redirect="true"/>
            <forward name="back" path="/do/listConvForm" redirect="true"/> 
        </action>
        
        <!-- Manually defined schemas -->
        <action path="/uplSchemas"  type="eionet.gdem.web.struts.schema.UplSchemaFormAction" input="/testConv.jsp" scope="request">
            <forward name="success" path="/uplSchema.jsp" />
        </action>
        <action path="/deleteUplSchema"  scope="request" type="eionet.gdem.web.struts.schema.DeleteUplSchemaAction">           
        	<forward name="success" path="/do/uplSchemas"  redirect="true"/>            
        </action>        
        <action path="/addUplSchemaForm"  parameter="/addUplSchema.jsp" scope="request" validate="false" type="org.apache.struts.actions.ForwardAction"/>           
        <action path="/addUplSchema"  scope="request" type="eionet.gdem.web.struts.schema.AddUplSchemaAction" name="UplSchemaForm">           
        	<forward name="success" path="/do/uplSchemas"  redirect="true"/>            
        	<forward name="fail" path="/do/addUplSchemaForm"  redirect="true"/>
        </action>        
        <action path="/editUplSchemaForm" name="EditUplSchemaForm" type="eionet.gdem.web.struts.schema.EditUplSchemaFormAction" input="/editUplSchema.jsp" scope="request">
            <forward name="success" path="/editUplSchema.jsp" redirect="true" />
        </action>
        <action path="/editUplSchema"  scope="request" type="eionet.gdem.web.struts.schema.EditUplSchemaAction" name="EditUplSchemaForm">           
        	<forward name="success" path="/do/uplSchemas"  redirect="true"/>            
        </action>
        
        <!--  Hosts module -->
        <action path="/hosts/list"  scope="request" type="eionet.gdem.web.struts.hosts.ListHostsAction">           
        	<forward name="success" path="/hosts/list.jsp" />           
        </action>        
        <action path="/hosts/add" name="HostForm" validate="false" type="eionet.gdem.web.struts.hosts.AddHostAction">           
        	<forward name="success" path="/hosts/details.jsp" />
        	<forward name="fail" path="/hosts/list.jsp" />
        </action>
        <action path="/hosts/edit" name="HostForm" input="/hosts/list.jsp"  scope="session" validate="false" type="eionet.gdem.web.struts.hosts.HostDetailsAction">           
        	<forward name="success" path="/hosts/details.jsp" />
        </action>
        <action path="/hosts/delete" name="HostForm" input="/hosts/list.jsp"  validate="false" type="eionet.gdem.web.struts.hosts.DeleteHostAction">           
        	<forward name="success" path="/do/hosts/list" redirect="true" />         
        </action>
        <action path="/hosts/save" name="HostForm" input="/hosts/details.jsp" scope="session" type="eionet.gdem.web.struts.hosts.SaveHostAction">           
        	<forward name="success" path="/do/hosts/list" redirect="true" />
        </action>
        
       
        <action path="/getsource" scope="request" type="eionet.gdem.web.struts.source.GetSourceAction"/>
		<!--  uploaded XML file actions -->        
        <action path="/uplXmlFiles"  type="eionet.gdem.web.struts.xmlfile.UplXmlFileFormAction" scope="request">
            <forward name="success" path="/uplXmlFile.jsp" />
        </action>
        <action path="/deleteUplXmlFile"  scope="request" type="eionet.gdem.web.struts.xmlfile.DeleteUplXmlFileAction">           
        	<forward name="success" path="/do/uplXmlFiles"  redirect="true"/>            
        </action>        
        <action path="/addUplXmlFileForm"  parameter="/addUplXmlFile.jsp" scope="request" validate="false" type="org.apache.struts.actions.ForwardAction"/>           
        <action path="/addUplXmlFile"  scope="request" type="eionet.gdem.web.struts.xmlfile.AddUplXmlFileAction" name="UplXmlFileForm">           
        	<forward name="success" path="/do/uplXmlFiles"  redirect="true"/>            
        	<forward name="fail" path="/do/addUplXmlFileForm"  redirect="true"/>
        </action>        
        <action path="/editUplXmlFileForm" name="EditUplXmlFileForm" type="eionet.gdem.web.struts.xmlfile.EditUplXmlFileFormAction" scope="request" input="/editUplXmlFile.jsp">
            <forward name="success" path="/editUplXmlFile.jsp" redirect="true" />
        </action>
        <action path="/editUplXmlFile"  scope="request" type="eionet.gdem.web.struts.xmlfile.EditUplXmlFileAction" name="EditUplXmlFileForm">           
        	<forward name="success" path="/do/uplXmlFiles"  redirect="true"/>            
        </action>
<!-- methods for remote API HTTP POST and GET -->
        <action path="/listConversions"  scope="request" type="eionet.gdem.web.struts.remoteapi.ListConversionsAction">
	        <forward name="fail" path="/api/methodError" />
        </action>
        <action path="/convert"  scope="request" type="eionet.gdem.web.struts.remoteapi.ConvertAction">
	        <forward name="fail" path="/api/methodError" />
        </action>
        <action path="/convertPush"  scope="request" type="eionet.gdem.web.struts.remoteapi.ConvertPushAction">
	        <forward name="fail" path="/api/methodError" />
        </action>
        <action path="/methodError"  scope="request" type="eionet.gdem.web.struts.remoteapi.MethodErrorAction">
        </action>

 <!-- Edit UI -->
        <action path="/editUI/imageManagerSetup" type="eionet.gdem.web.struts.uimanage.ImageManagerSetupAction"
        name="imageForm" scope="request">
        <forward name="success" path="/editUI/ImageManager.jsp"/>
        </action>
        <action path="/editUI/imageManager" type="eionet.gdem.web.struts.uimanage.ImageManagerAction"
        name="imageForm" scope="request">
        <forward name="uploaded" path="/editUI/ImageManager.jsp"/>
        </action>
       <action path="/editUI/viewFooter" type="eionet.gdem.web.struts.uimanage.ViewTemplateAction"
        name="dynamicItemForm" parameter="footer" scope="request" validate="false">
            <forward name="footer" path="/editUI/FooterManager.jsp"/>
        </action>
        <action path="/editUI/viewHeader" type="eionet.gdem.web.struts.uimanage.ViewTemplateAction"
        name="dynamicItemForm" parameter="header" scope="request" validate="false" >
            <forward name="header" path="/editUI/HeaderManager.jsp"/>
        </action>
        <action path="/editUI/processTemplate" type="eionet.gdem.web.struts.uimanage.ProcessTemplateAction"
    	name="dynamicItemForm" scope="request" validate="false">
    		<forward name="footer" path="/do/editUI/viewFooter" redirect="true"/>
    		<forward name="header" path="/do/editUI/viewHeader" redirect="true"/>
    	</action>
        <action path="/ldapForm" type="eionet.gdem.web.struts.config.LdapFormAction"
    	name="ldapForm" scope="request" validate="false">
    		<forward name="success" path="/configLdap.jsp" redirect="true"/>
    	</action>
        <action path="/ldap" input="/configLdap.jsp" name="ldapForm"
            type="eionet.gdem.web.struts.config.LdapAction" scope="request">
             <forward name="success" path="/do/ldapForm" redirect="true"/>
        </action>
        <action path="/dbForm" type="eionet.gdem.web.struts.config.DbFormAction"
    	name="dbForm" scope="request" validate="false">
    		<forward name="success" path="/configDb.jsp" redirect="true"/>
    	</action>
        <action path="/db" input="/configDb.jsp" name="dbForm"
            type="eionet.gdem.web.struts.config.DbAction" scope="request">
             <forward name="success" path="/do/dbForm" redirect="true"/>
        </action>
    </action-mappings>
    
    
    <controller processorClass="eionet.gdem.web.struts.RequestProcessor" />
    <message-resources null="true" parameter="ApplicationResources" />
    <plug-in className="org.apache.struts.tiles.TilesPlugin">
        <set-property property="definitions-config" value="/WEB-INF/struts/tiles-defs.xml" />
    </plug-in>
    <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
    	<set-property property="pathnames" value="/WEB-INF/struts/validator-rules.xml, /WEB-INF/struts/validation.xml" />
	 </plug-in>
    
</struts-config>
